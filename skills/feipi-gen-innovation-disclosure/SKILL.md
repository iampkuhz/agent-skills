---
name: feipi-gen-innovation-disclosure
description: 用于根据输入内容按固定排版生成创新提案交底书，并约束章节字数、图示结构和行文风格。在需要沉淀专利前置材料时使用。
---

# 创新提案交底书生成（中文）

## 核心目标

输入业务与技术信息，输出一份结构完整、内容具体、可校验的《创新提案交底书》Markdown 文档。

## 触发场景

1. 需要把零散创新点整理为可评审交底书。
2. 需要按固定章节排版，避免漏项或结构漂移。
3. 需要在交付前自动检查字数、列表条目、图示与格式约束。

## 交互必填项（强约束）

开始撰写前必须向使用者确认以下 3 项：
1. 专利名（用于标题 `# 一种XXX方法/系统`）。
2. 使用场景（用于申请说明、背景、详细流程中的场景细节）。
3. 应用本方案的产品/项目（含已上线或计划上线时间）。

若缺少任意一项，必须先提问并等待确认，禁止自行假设填充。

## 依赖技能（强约束）

必须依赖 `feipi-gen-plantuml-code` 生成并校验图示：
1. `详细描述`章节至少 1 图，建议 2 图（模块图 + 活动图/时序图）。
2. 图代码必须是 PlantUML 代码块（`@startuml` ... `@enduml`）。
3. 流程图中的序号（如 `S1`、`S2`）必须与正文流程序号一致。

## 输入与输出

1. 最少输入
- 专利名
- 使用场景
- 应用产品/项目（含时间）
- 业务背景与现状痛点
- 本方案核心做法（模块/步骤）

2. 输出
- 一份 Markdown 交底书，标题从 `# 一种XXX方法/系统` 开始。
- 标题顺序、标题名称与模板一致。
- 通过 `scripts/check_disclosure_format.sh` 格式校验。

## 固定排版模板（强约束）

必须使用：`assets/proposal_template.md`

规则：
1. 不改标题层级，不改标题文本。
2. 不删除章节标题；如无内容可写“无”。
3. 可在章节正文内补充四级标题、列表、图示，但不能改变主模板结构。

## 写作风格约束（强约束）

1. 优先一层列表（`1.`/`-`），避免二层列表。
2. `申请说明`必须是`背景`的简化版，只写核心问题、方案动作、解决结果。
3. `术语解释`写法：直接解释该术语在本方案中的含义；若与业界常见定义不同，在句末补一句“与传统差异”。
4. 竞对相关章节与相似方案章节优先写 2-3 条，按真实差异点列举，禁止为凑数量拼接无效条目。
5. `详细描述`按固定顺序写：
- 一段话讲清技术本质与核心价值。
- 给出模块图并解释模块职责。
- 给出主流程图（或与模块图共用序号），正文流程序号与图中序号一致。
- 展开核心创新点/核心模型，可配简图。
6. `是否还有其他解决方案`章节写“本方案变体”，不是无关替代品。
7. `技术效果总结`与`关键技术创新点`统一格式：
- `[序号] **摘要短语**：一小段详细描述`
8. 禁止套话、大话、空泛原则，必须落到具体问题、具体步骤、明确场景。

## 工作流（Explore -> Plan -> Implement -> Verify）

1. Explore（探索）
- 收集输入并核对“交互必填项”。
- 缺失即提问，不进入写作。

2. Plan（规划）
- 按模板逐段映射素材，先列提纲再扩写。
- 先规划图示序号体系（`S1...Sn`）再写正文流程。

3. Implement（实现）
- 优先列表化写作，减少长段落。
- `申请说明`保持简洁，不展开背景细节。
- `详细描述`建议控制在 1000-1500 字区间。
- 用 `feipi-gen-plantuml-code` 生成并校验图示后再粘贴。

4. Verify（验证）
- 对输出文档执行格式校验：
```bash
bash scripts/check_disclosure_format.sh ./tmp/innovation/disclosure.md
```
- 若校验失败，先修复对应章节后再交付。

## 标准命令

1. 校验单个交底书
```bash
bash scripts/check_disclosure_format.sh <交底书.md>
```

2. 运行 skill 回归测试（happy case）
```bash
make test SKILL=feipi-gen-innovation-disclosure
```

## 验收标准

1. 模板章节完整，顺序正确。
2. 字数、条目数量、格式约束满足校验脚本。
3. `详细描述`章节包含图示且流程序号与图示一致。
4. `make test SKILL=feipi-gen-innovation-disclosure`（单 happy case）通过。

## 渐进式披露导航

- 模板文件：`assets/proposal_template.md`
- 校验脚本：`scripts/check_disclosure_format.sh`
- 测试入口：`scripts/test.sh`
- happy case：`references/cases/happy-case-full.md`
